# [임베디드SW] 24. 우선순위 상한 프로토콜

<aside>

# 💖 우선순위 상한 프로토콜

</aside>

## 아이디어

프로세스 뿐만이 아니라 **자원에도 우선순위를 매기자**!

- 그래서 아무나 lock을 못 걸게 만들자
- 이렇게 되면, **우선 순위가 높은 task 순서대로 자원을 locking하게 된다**

### 우선순위 상한 프로토콜의 장점

이행 블로킹 문제와 데드락 문제를 모두 해결할 수 있다 !! !!

### 자원의 우선 순위는 어떻게 결정하나요?

(자원의 우선순위) = 그 자원을 쓰고 싶어하는 task들 중 가장 높은 priority

## 우선순위 상한 프로토콜을 사용하는 예시

![image.png](image%2055.png)

- 예를 들어 다음과 같이 자원을 사용한다고 하자.
    - J1 = {..., P(S0) ..., V(S0),...}
    - J2 = {..., P(S1) ..., P(S2),...,V(S2) ...,V(S1),...}
    - J3 = {..., P(S2) ..., P(S1),...,V(S1) ...,V(S2),...}
- 이 때, 각 자원마다 우선순위를 다음과 같이 할당한다.
    - S0; J1 의 우선 순위
    - S1; J2 의 우선 순위
    - S2; J2 의 우선 순위

<aside>

**우선순위 상한 프로토콜을 이용해서 transitive blocking 문제를 해결하는 걸 직접 그려보라고 말씀하심. 제가 직접 그려보라는 이유가 있겠죠……?라고 의미심장하게 말씀하심**

</aside>

![image.png](image%2053.png)